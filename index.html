<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KTM Generator Real</title>
    <!-- Fonts matching the reference -->
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Open+Sans:wght@400;600;700&family=Great+Vibes&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar Controls -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fa-solid fa-id-card"></i> Data Mahasiswa</h2>
                <button id="randomDataBtn" class="btn-sm"><i class="fa-solid fa-shuffle"></i> Random</button>
            </div>

            <div class="form-container">
                <!-- University Config -->
                <div class="form-group section-title">
                    <label>KOP SURAT (HEADER)</label>
                </div>
                <div class="form-group">
                    <label>Nama Universitas (Baris 1)</label>
                    <input type="text" id="univNameInput" value="INSTITUT TEKNOLOGI DAN SAINS NU PEKALONGAN">
                </div>
                <div class="form-group">
                    <label>Alamat Universitas (Kecil di bawah)</label>
                    <textarea id="univAddressInput"
                        rows="2">Jl. Karangdowo No. 9, Kemoren, Karangdowo, Kec. Kedungwuni, Pekalongan, Jawa Tengah 51173</textarea>
                </div>
                <div class="form-group">
                    <label>Logo Universitas</label>
                    <div class="file-upload-wrapper">
                        <input type="file" id="logoInput" accept="image/*">
                        <div class="file-upload-btn"><i class="fa-solid fa-upload"></i> Upload Logo</div>
                    </div>
                </div>

                <!-- Color Theme -->
                <div class="form-group">
                    <label>Warna Garis Header</label>
                    <div class="theme-selector">
                        <button class="theme-btn active" data-color="green" style="background: #15803d;"></button>
                        <button class="theme-btn" data-color="blue" style="background: #1d4ed8;"></button>
                        <button class="theme-btn" data-color="red" style="background: #b91c1c;"></button>
                        <button class="theme-btn" data-color="yellow" style="background: #ca8a04;"></button>
                        <button class="theme-btn" data-color="purple" style="background: #7e22ce;"></button>
                        <button class="theme-btn" data-color="black" style="background: #334155;"></button>
                    </div>
                </div>

                <!-- Student Data -->
                <div class="form-group section-title">
                    <label>DATA MAHASISWA</label>
                </div>
                <!-- Photo -->
                <div class="form-group">
                    <label>Foto Mahasiswa (3x4)</label>
                    <div class="file-upload-wrapper">
                        <input type="file" id="photoInput" accept="image/*">
                        <div class="file-upload-btn"><i class="fa-solid fa-camera"></i> Upload Foto</div>
                    </div>
                </div>

                <div class="form-group"><label>Nama Lengkap</label><input type="text" id="nameInput"
                        value="Heru Firmansyah"></div>
                <div class="form-group"><label>NIM</label><input type="text" id="nimInput" value="25110045"></div>
                <div class="form-group"><label>Fakultas</label><input type="text" id="facultyInput" value="Teknik">
                </div>
                <div class="form-group"><label>Program Studi</label><input type="text" id="majorInput"
                        value="S1 Teknik Informatika"></div>

                <div class="row">
                    <div class="form-group col"><label>Jenjang</label><input type="text" id="degreeInput" value="S1">
                    </div>
                    <div class="form-group col"><label>Tahun Akademik</label><input type="text" id="yearInput"
                            value="2025 - 2029"></div>
                </div>

                <div class="form-group"><label>Masa Aktif Kartu</label><input type="text" id="validityInput"
                        value="2025 - 2029"></div>
                <div class="form-group"><label>Status</label><input type="text" id="statusInput"
                        value="Mahasiswa Aktif"></div>


                <!-- Signature Data -->
                <div class="form-group section-title">
                    <label>TANDA TANGAN PEJABAT</label>
                </div>
                <div class="form-group"><label>Jabatan (Teks Kecil)</label><input type="text" id="officialTitleInput"
                        value="Nama Dosen Wali / Pejabat Kampus:"></div>
                <div class="form-group">
                    <label>Scan Tanda Tangan / Stempel</label>
                    <div class="file-upload-wrapper">
                        <input type="file" id="officialSigInput" accept="image/*">
                        <div class="file-upload-btn"><i class="fa-solid fa-stamp"></i> Upload Stempel</div>
                    </div>
                </div>
                <div class="form-group"><label>Nama Pejabat</label><input type="text" id="officialNameInput"
                        value="M. Dzikrullah Faza, Lc., M.IRKH"></div>

                <br>
            </div>
        </aside>

        <!-- Preview Area -->
        <main class="main-content">
            <header class="top-bar">
                <h1>KTM Generator Preview</h1>
                <button id="downloadBtn" class="btn-primary"><i class="fa-solid fa-download"></i> Download PNG</button>
            </header>

            <div class="preview-area">

                <!-- THE CARD -->
                <div id="idCard" class="real-card">
                    <!-- Background Pattern -->
                    <div class="security-pattern"></div>

                    <!-- Header -->
                    <div class="card-header">
                        <div class="logo-box">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/9/9c/Logo_NU_Pekalongan.png"
                                id="cardLogo" alt="Logo">
                        </div>
                        <div class="header-text">
                            <div class="country-text">REPUBLIK INDONESIA</div>
                            <h2 id="cardUnivName">INSTITUT TEKNOLOGI DAN SAINS NU PEKALONGAN</h2>
                            <div id="cardAddress" class="address-text">Jl. Karangdowo No. 9, Kemoren, Karangdowo, Kec.
                                Kedungwuni, Pekalongan, Jawa Tengah 51173</div>
                        </div>
                    </div>

                    <!-- Green Line -->
                    <div class="separator-line">
                        <div class="green-bar">KARTU TANDA MAHASISWA</div>
                        <div class="blue-accent"></div>
                    </div>

                    <!-- Body Content -->
                    <div class="card-body">
                        <!-- Left: Photo -->
                        <div class="left-section">
                            <div class="photo-box">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" id="cardPhoto" alt="Foto">
                            </div>
                        </div>

                        <!-- Right: Data -->
                        <div class="right-section">
                            <table class="data-table">
                                <tr>
                                    <td class="label">Nama Lengkap</td>
                                    <td class="sep">:</td>
                                    <td class="val bold" id="cardName">Heru Firmansyah</td>
                                </tr>
                                <tr>
                                    <td class="label">NIM</td>
                                    <td class="sep">:</td>
                                    <td class="val" id="cardNim">25110045</td>
                                </tr>
                                <tr>
                                    <td class="label">Fakultas</td>
                                    <td class="sep">:</td>
                                    <td class="val" id="cardFaculty">Teknik</td>
                                </tr>
                                <tr>
                                    <td class="label">Program Studi</td>
                                    <td class="sep">:</td>
                                    <td class="val" id="cardMajor">S1 Teknik Informatika</td>
                                </tr>
                                <tr>
                                    <td class="label">Jenjang</td>
                                    <td class="sep">:</td>
                                    <td class="val" id="cardDegree">S1</td>
                                </tr>
                                <tr>
                                    <td class="label">Tahun Akademik</td>
                                    <td class="sep">:</td>
                                    <td class="val" id="cardYear">2025 - 2029</td>
                                </tr>
                                <tr>
                                    <td class="label">Masa Aktif Kartu</td>
                                    <td class="sep">:</td>
                                    <td class="val" id="cardValidity">2025 - 2029</td>
                                </tr>
                                <tr>
                                    <td class="label">Status</td>
                                    <td class="sep">:</td>
                                    <td class="val" id="cardStatus">Mahasiswa Aktif</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!-- Footer Area -->
                    <div class="card-footer">
                        <!-- QR Code Left -->
                        <div class="qr-section">
                            <img src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=25110045"
                                id="cardQr" alt="QR">
                            <div class="sn-text">SN: <span id="cardSn">25110045-A1</span></div>
                            <div class="issue-date">Issue Date:<br><span id="cardIssueDate">10-09-2025</span></div>
                        </div>

                        <!-- Signature Right -->
                        <div class="official-sign-section">
                            <div class="official-title" id="cardOfficialTitle">Nama Dosen Wali / Pejabat Kampus:</div>
                            <div class="sign-box">
                                <!-- Stamp/Sig Image -->
                                <img src="" id="cardOfficialSigImg" class="stamp-img" style="display:none;">
                                <!-- Fallback visual signature -->
                                <div id="cardOfficialSigText" class="handwritten-fallback" style="display:block;">
                                    Signature</div>
                            </div>
                            <div class="official-name" id="cardOfficialName">M. Dzikrullah Faza, Lc., M.IRKH</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="loadingOverlay"
                style="display:none; position:absolute; inset:0; background:rgba(0,0,0,0.8); color:white; justify-content:center; align-items:center; z-index:999;">
                Generating...</div>
        </main>
    </div>
    <script src="script.js"></script>
</body>

</html>
